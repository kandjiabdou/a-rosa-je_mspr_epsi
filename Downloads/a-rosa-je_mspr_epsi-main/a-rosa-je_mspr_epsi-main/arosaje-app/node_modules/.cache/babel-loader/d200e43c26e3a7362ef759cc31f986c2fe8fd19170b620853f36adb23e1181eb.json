{"ast":null,"code":"import { effectScope, onScopeDispose, watch } from 'vue';\nexport function useToggleScope(source, cb) {\n  let scope;\n  watch(source, active => {\n    if (active && !scope) {\n      scope = effectScope();\n      scope.run(cb);\n    } else if (!active) {\n      var _scope;\n      (_scope = scope) == null ? void 0 : _scope.stop();\n      scope = undefined;\n    }\n  }, {\n    immediate: true\n  });\n  onScopeDispose(() => {\n    var _scope2;\n    (_scope2 = scope) == null ? void 0 : _scope2.stop();\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,WAAW,EAAEC,cAAc,EAAEC,KAAK,QAAQ,KAAK;AAGxD,OAAO,SAASC,cAAc,CAAEC,MAA4B,EAAEC,EAAc,EAAE;EAC5E,IAAIC,KAA8B;EAClCJ,KAAK,CAACE,MAAM,EAAEG,MAAM,IAAI;IACtB,IAAIA,MAAM,IAAI,CAACD,KAAK,EAAE;MACpBA,KAAK,GAAGN,WAAW,EAAE;MACrBM,KAAK,CAACE,GAAG,CAACH,EAAE,CAAC;IACf,CAAC,MAAM,IAAI,CAACE,MAAM,EAAE;MAAA;MAClB,eAAK,qBAALE,OAAOC,IAAI,EAAE;MACbJ,KAAK,GAAGK,SAAS;IACnB;EACF,CAAC,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EAEvBX,cAAc,CAAC,MAAM;IAAA;IACnB,gBAAK,qBAALY,QAAOH,IAAI,EAAE;EACf,CAAC,CAAC;AACJ","names":["effectScope","onScopeDispose","watch","useToggleScope","source","cb","scope","active","run","_scope","stop","undefined","immediate","_scope2"],"sources":["../../src/composables/toggleScope.ts"],"sourcesContent":["import { effectScope, onScopeDispose, watch } from 'vue'\nimport type { EffectScope, WatchSource } from 'vue'\n\nexport function useToggleScope (source: WatchSource<boolean>, cb: () => void) {\n  let scope: EffectScope | undefined\n  watch(source, active => {\n    if (active && !scope) {\n      scope = effectScope()\n      scope.run(cb)\n    } else if (!active) {\n      scope?.stop()\n      scope = undefined\n    }\n  }, { immediate: true })\n\n  onScopeDispose(() => {\n    scope?.stop()\n  })\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}