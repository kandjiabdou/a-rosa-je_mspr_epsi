generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Role {
  id   Int    @id @default(autoincrement())
  user User   @relation(fields: [id], references: [id_user])
  nom  String @unique
}

model User {
  id_user      Int           @id @default(autoincrement())
  prenom       String?
  nom          String
  email        String        @unique
  telephone    String        @unique
  Numero_rue   String?
  code_postale String?
  ville        String?
  mdp          String?
  flag         Int           @default(1)
  role         Role?
  botanistes   Botaniste[]
  user_lambda  User_lambda[]
  annonces     Annonce[]
  gardiennages Gardiennage[]
  Conseil      Conseil[]
}

model Botaniste {
  user    Int  @id
  id_user User @relation(fields: [user], references: [id_user])
}

model User_lambda {
  user    Int  @id
  id_user User @relation(fields: [user], references: [id_user])
}

model Annonce {
  id_annonce     Int            @id @default(autoincrement())
  localisation   String?
  description    String?
  type_gardien   Int?
  nb_signalement Int @default(0)
  latidute       Float
  longitude      Float
  id_user        Int
  user           User           @relation(fields: [id_user], references: [id_user])
  gardiennage    Gardiennage ?
  photo          PhotoAnnonce[]
}

model Gardiennage {
  id_gardiennage    Int                @id @default(autoincrement())
  date_debut        DateTime
  date_fin          DateTime
  description       String?
  id_user           Int
  user           User           @relation(fields: [id_user], references: [id_user])
  idAnnonce         Int @unique
  annonce        Annonce @relation(fields: [idAnnonce], references: [id_annonce])
  photo_gardiennage PhotoGardiennage[]
}

model PhotoGardiennage {
  id_photo      Int         @id @default(autoincrement())
  lien          String
  date_photo    DateTime
  idGardiennage Int
  gardiennage   Gardiennage @relation(fields: [idGardiennage], references: [id_gardiennage])
}

model PhotoAnnonce {
  id_photo   Int      @id @default(autoincrement())
  lien       String
  date_photo DateTime
  idAnnonce  Int
  annonce    Annonce  @relation(fields: [idAnnonce], references: [id_annonce])
}

model Conseil {
  id_consiel   Int      @id @default(autoincrement())
  date_conseil DateTime
  message      String
  idUser       Int
  user         User     @relation(fields: [idUser], references: [id_user])
}
