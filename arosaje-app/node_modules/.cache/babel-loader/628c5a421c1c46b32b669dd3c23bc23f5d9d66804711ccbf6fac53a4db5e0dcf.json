{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport Pusher from 'pusher-js';\nexport default {\n  name: 'ChatsPage',\n  setup() {\n    const username = ref('username');\n    const messages = ref([]);\n    const message = ref('');\n    onMounted(() => {\n      Pusher.logToConsole = true;\n      const pusher = new Pusher('25291c0752d6089a660c', {\n        cluster: 'eu'\n      });\n      const channel = pusher.subscribe('chat');\n      channel.bind('message', data => {\n        messages.value.push(data);\n      });\n    });\n    const submit = async () => {\n      await fetch('http://localhost:3000/api/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username.value,\n          message: message.value\n        })\n      });\n      message.value = '';\n    };\n    return {\n      username,\n      messages,\n      message,\n      submit\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","Pusher","name","setup","username","messages","message","logToConsole","pusher","cluster","channel","subscribe","bind","data","value","push","submit","fetch","method","headers","body","JSON","stringify"],"sources":["C:\\Users\\toumy\\Desktop\\projet_mspr\\a-rosa-je_mspr_epsi\\arosaje-app\\src\\views\\messages.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\">\r\n      <div class=\"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\">\r\n        <input class=\"fs-5 fw-semibold\" v-model=\"username\"/>\r\n      </div>\r\n      <div class=\"list-group list-group-flush border-bottom scrollarea\">\r\n        <div class=\"list-group-item list-group-item-action py-3 lh-tight\"\r\n             v-for=\"message in messages\" :key=\"message\"\r\n        >\r\n          <div class=\"d-flex w-100 align-items-center justify-content-between\">\r\n            <strong class=\"mb-1\">{{ message.username }}</strong>\r\n          </div>\r\n          <div class=\"col-10 mb-1 small\">{{ message.message }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <form @submit.prevent=\"submit\">\r\n      <input class=\"form-control\" placeholder=\"Write a message\" v-model=\"message\"/>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ref, onMounted} from 'vue';\r\nimport Pusher from 'pusher-js';\r\n\r\nexport default {\r\n  name: 'ChatsPage',\r\n  setup() {\r\n    const username = ref('username');\r\n    const messages = ref([]);\r\n    const message = ref('');\r\n\r\n    onMounted(() => {\r\n      Pusher.logToConsole = true;\r\n\r\n      const pusher = new Pusher('25291c0752d6089a660c', {\r\n        cluster: 'eu'\r\n      });\r\n\r\n      const channel = pusher.subscribe('chat');\r\n      channel.bind('message', data => {\r\n        messages.value.push(data);\r\n      });\r\n    })\r\n\r\n    const submit = async () => {\r\n      await fetch('http://localhost:3000/api/messages', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({\r\n          username: username.value,\r\n          message: message.value\r\n        })\r\n      })\r\n\r\n      message.value = '';\r\n    }\r\n\r\n    return {\r\n      username,\r\n      messages,\r\n      message,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.scrollarea {\r\n  min-height: 500px;\r\n}\r\n</style>\r\n"],"mappings":";AAwBA,SAAQA,GAAG,EAAEC,SAAS,QAAO,KAAK;AAClC,OAAOC,MAAK,MAAO,WAAW;AAE9B,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIL,GAAG,CAAC,UAAU,CAAC;IAChC,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMO,OAAM,GAAIP,GAAG,CAAC,EAAE,CAAC;IAEvBC,SAAS,CAAC,MAAM;MACdC,MAAM,CAACM,YAAW,GAAI,IAAI;MAE1B,MAAMC,MAAK,GAAI,IAAIP,MAAM,CAAC,sBAAsB,EAAE;QAChDQ,OAAO,EAAE;MACX,CAAC,CAAC;MAEF,MAAMC,OAAM,GAAIF,MAAM,CAACG,SAAS,CAAC,MAAM,CAAC;MACxCD,OAAO,CAACE,IAAI,CAAC,SAAS,EAAEC,IAAG,IAAK;QAC9BR,QAAQ,CAACS,KAAK,CAACC,IAAI,CAACF,IAAI,CAAC;MAC3B,CAAC,CAAC;IACJ,CAAC;IAED,MAAMG,MAAK,GAAI,MAAAA,CAAA,KAAY;MACzB,MAAMC,KAAK,CAAC,oCAAoC,EAAE;QAChDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC;QAC7CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBlB,QAAQ,EAAEA,QAAQ,CAACU,KAAK;UACxBR,OAAO,EAAEA,OAAO,CAACQ;QACnB,CAAC;MACH,CAAC;MAEDR,OAAO,CAACQ,KAAI,GAAI,EAAE;IACpB;IAEA,OAAO;MACLV,QAAQ;MACRC,QAAQ;MACRC,OAAO;MACPU;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}