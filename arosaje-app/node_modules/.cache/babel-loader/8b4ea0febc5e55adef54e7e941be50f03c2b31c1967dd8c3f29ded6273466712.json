{"ast":null,"code":"import Message from \"@/components/Message\";\nimport ChatBox from \"@/components/ChatBox\";\nimport { listenChat, sendMessage } from \"@/core/Firebase.ts\";\nimport RegisterDialog from \"@/components/RegisterDialog\";\nimport { v1 as uid } from 'uuid';\nimport Vue from \"vue\";\nexport default {\n  name: 'App',\n  // Here we register the components which\n  // we are going to use in the template\n  components: {\n    RegisterDialog,\n    ChatBox,\n    Message\n  },\n  // This is going to be called\n  //  when the component gets rendered\n  created() {\n    this.getChat();\n  },\n  methods: {\n    onRegister(event, name) {\n      event.preventDefault();\n\n      // Authentication is out of scope for this project\n      // so we just generate a uuid\n      this.user = {\n        name,\n        id: uid()\n      };\n    },\n    getChat() {\n      listenChat(chat => {\n        this.messages = chat.reverse().map(m => ({\n          ...m,\n          isMine: m.uid && m.uid === this.user?.id\n        }));\n        Vue.nextTick(() => {\n          const element = this.$refs['messages'];\n          element.scrollTo({\n            behavior: 'smooth',\n            top: element.scrollHeight\n          });\n        });\n      });\n    },\n    // This method will be called when a new message is sent\n    onSubmit(event, text) {\n      event.preventDefault();\n      sendMessage({\n        text,\n        uid: this.user?.id,\n        author: this.user?.name\n      });\n    }\n  },\n  data: () => ({\n    user: undefined,\n    messages: []\n  })\n};","map":{"version":3,"names":["Message","ChatBox","listenChat","sendMessage","RegisterDialog","v1","uid","Vue","name","components","created","getChat","methods","onRegister","event","preventDefault","user","id","chat","messages","reverse","map","m","isMine","nextTick","element","$refs","scrollTo","behavior","top","scrollHeight","onSubmit","text","author","data","undefined"],"sources":["C:\\Users\\toumy\\Desktop\\projet_mspr\\a-rosa-je_mspr_epsi\\arosaje-app\\src\\views\\messages.vue"],"sourcesContent":["<template>\r\n  <div class='app'>\r\n    <div ref='messages' class='messages'>\r\n      <Message\r\n          v-for='message in messages'\r\n          :key='message.id'\r\n          :class='[\"message\", { right: message.isMine }]'\r\n          :dark='message.isMine'\r\n          :text='message.text'\r\n          :author='message.author'\r\n      />\r\n    </div>\r\n\r\n    <ChatBox\r\n        class='chat-box'\r\n        @submit='onSubmit'\r\n    />\r\n\r\n    <RegisterDialog\r\n        v-if='!user'\r\n        @submit='onRegister'\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Message from \"@/components/Message\";\r\nimport ChatBox from \"@/components/ChatBox\";\r\nimport { listenChat, sendMessage } from \"@/core/Firebase.ts\";\r\nimport RegisterDialog from \"@/components/RegisterDialog\";\r\nimport { v1 as uid } from 'uuid';\r\nimport Vue from \"vue\";\r\n\r\nexport default {\r\n  name: 'App',\r\n\r\n  // Here we register the components which\r\n  // we are going to use in the template\r\n  components: {\r\n    RegisterDialog,\r\n    ChatBox,\r\n    Message\r\n  },\r\n\r\n  // This is going to be called\r\n  //  when the component gets rendered\r\n  created() {\r\n    this.getChat();\r\n  },\r\n  methods: {\r\n    onRegister(event, name) {\r\n      event.preventDefault();\r\n\r\n      // Authentication is out of scope for this project\r\n      // so we just generate a uuid\r\n      this.user = { name, id: uid() };\r\n    },\r\n    getChat() {\r\n      listenChat((chat) => {\r\n        this.messages = chat.reverse().map(m => ({\r\n          ...m,\r\n          isMine: m.uid && m.uid === this.user?.id\r\n        }));\r\n\r\n        Vue.nextTick(() => {\r\n          const element = this.$refs['messages'];\r\n          element.scrollTo({ behavior: 'smooth', top: element.scrollHeight });\r\n        });\r\n      });\r\n    },\r\n\r\n    // This method will be called when a new message is sent\r\n    onSubmit(event, text) {\r\n      event.preventDefault();\r\n\r\n      sendMessage({\r\n        text,\r\n        uid: this.user?.id,\r\n        author: this.user?.name\r\n      });\r\n    }\r\n  },\r\n  data: () => ({\r\n    user: undefined,\r\n    messages: []\r\n  })\r\n}\r\n</script>\r\n\r\n<style>\r\n@font-face {\r\n  font-family: 'Georama';\r\n  src: url('./assets/Georama.ttf');\r\n}\r\n\r\n@font-face {\r\n  font-family: 'Georama';\r\n  src: url('./assets/Georama.ttf');\r\n  font-weight: bold;\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml {\r\n  font-family: 'Georama', sans-serif;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n}\r\n\r\nbutton {\r\n  border: 0;\r\n  background: #2a60ff;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: 1rem;\r\n}\r\n\r\ninput {\r\n  border: 0;\r\n  padding: 1rem;\r\n  background: rgba(0, 0, 0, 0.1);\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.app {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.messages {\r\n  flex-grow: 1;\r\n  overflow: auto;\r\n  padding: 1rem;\r\n}\r\n\r\n.message + .message {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.message.right {\r\n  margin-left: auto;\r\n}\r\n</style>\r\n"],"mappings":"AA0BA,OAAOA,OAAM,MAAO,sBAAsB;AAC1C,OAAOC,OAAM,MAAO,sBAAsB;AAC1C,SAASC,UAAU,EAAEC,WAAU,QAAS,oBAAoB;AAC5D,OAAOC,cAAa,MAAO,6BAA6B;AACxD,SAASC,EAAC,IAAKC,GAAE,QAAS,MAAM;AAChC,OAAOC,GAAE,MAAO,KAAK;AAErB,eAAe;EACbC,IAAI,EAAE,KAAK;EAEX;EACA;EACAC,UAAU,EAAE;IACVL,cAAc;IACdH,OAAO;IACPD;EACF,CAAC;EAED;EACA;EACAU,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,OAAO,EAAE;EAChB,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,KAAK,EAAEN,IAAI,EAAE;MACtBM,KAAK,CAACC,cAAc,EAAE;;MAEtB;MACA;MACA,IAAI,CAACC,IAAG,GAAI;QAAER,IAAI;QAAES,EAAE,EAAEX,GAAG;MAAG,CAAC;IACjC,CAAC;IACDK,OAAOA,CAAA,EAAG;MACRT,UAAU,CAAEgB,IAAI,IAAK;QACnB,IAAI,CAACC,QAAO,GAAID,IAAI,CAACE,OAAO,EAAE,CAACC,GAAG,CAACC,CAAA,KAAM;UACvC,GAAGA,CAAC;UACJC,MAAM,EAAED,CAAC,CAAChB,GAAE,IAAKgB,CAAC,CAAChB,GAAE,KAAM,IAAI,CAACU,IAAI,EAAEC;QACxC,CAAC,CAAC,CAAC;QAEHV,GAAG,CAACiB,QAAQ,CAAC,MAAM;UACjB,MAAMC,OAAM,GAAI,IAAI,CAACC,KAAK,CAAC,UAAU,CAAC;UACtCD,OAAO,CAACE,QAAQ,CAAC;YAAEC,QAAQ,EAAE,QAAQ;YAAEC,GAAG,EAAEJ,OAAO,CAACK;UAAa,CAAC,CAAC;QACrE,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAED;IACAC,QAAQA,CAACjB,KAAK,EAAEkB,IAAI,EAAE;MACpBlB,KAAK,CAACC,cAAc,EAAE;MAEtBZ,WAAW,CAAC;QACV6B,IAAI;QACJ1B,GAAG,EAAE,IAAI,CAACU,IAAI,EAAEC,EAAE;QAClBgB,MAAM,EAAE,IAAI,CAACjB,IAAI,EAAER;MACrB,CAAC,CAAC;IACJ;EACF,CAAC;EACD0B,IAAI,EAAEA,CAAA,MAAO;IACXlB,IAAI,EAAEmB,SAAS;IACfhB,QAAQ,EAAE;EACZ,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}