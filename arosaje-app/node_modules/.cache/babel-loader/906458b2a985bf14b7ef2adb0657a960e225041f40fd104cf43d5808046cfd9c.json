{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nexport default {\n  name: \"RegisterLogin\",\n  components: {\n    Field,\n    ErrorMessage\n  },\n  data() {\n    const schema = yup.object().shape({\n      username: yup.string().required(\"Un identifiant est nécessaire!\").min(3, \"Dois contenir plus de 3 caractéres !\").max(20, \"Dois contenir au maximum 20 caractéres !\"),\n      email: yup.string().required(\"Un mail est nécessaire!\").email(\"Email invalid!\").max(50, \"Dois contenir au maximum 20 caractéres!\"),\n      password: yup.string().required(\"Mot de passe nécessaire !\").min(8, \"Dois contenir au moins 8 caractéres !\").max(40, \"Dois contenir au maximum 20 caractéres!\")\n    });\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      schema,\n      email: \"\",\n      name: \"\",\n      prenom: \"\",\n      password: \"\"\n    };\n  },\n  methods: {\n    async submit() {\n      try {\n        let response = await axios.post(\"http://localhost:3000/signup\", {\n          nom: this.nom,\n          prenom: this.prenom,\n          email: this.email,\n          mdp: this.mdp\n        });\n        console.log(\"response login\", response);\n        const data = response.data;\n        console.log(data);\n        if (data[\"status\"] != 400 || data[\"success\"]) {\n          response = await axios.post(\"http://localhost:3000/login\", {\n            email: this.email,\n            mdp: this.mdp\n          });\n          // Enregistrer le jeton d'authentification dans le stockage local ou dans un cookie\n          localStorage.setItem('authToken', response.data.token);\n          // Rediriger l'utilisateur vers la page suivante\n          this.$router.push('/profil');\n        } else {\n          // Afficher un message d'erreur à l'utilisateur\n          alert(data.message);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["Field","ErrorMessage","yup","axios","name","components","data","schema","object","shape","username","string","required","min","max","email","password","successful","loading","message","prenom","methods","submit","response","post","nom","mdp","console","log","localStorage","setItem","token","$router","push","alert","error"],"sources":["C:\\Users\\toumy\\Desktop\\projet_mspr\\a-rosa-je_mspr_epsi\\arosaje-app\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\r\n  <div class=\"containnerform\">\r\n    <div class=\"bloc\">\r\n      <div class=\"form\">\r\n        <img\r\n          src=\"https://media.istockphoto.com/id/536037199/fr/vectoriel/main-tenant-plante-logo-concept-de-croissance-vector-illustration.jpg?s=612x612&w=0&k=20&c=4H35vhMOuQ90StwU-d7WXmFhrqKfQH5AfKTjrJHlaXo=\"\r\n          alt=\"logoaro\" />\r\n        <form @submit.prevent=\"submit\" :validation-schema=\"schema\">\r\n          <div v-if=\"!successful\">\r\n            <div class=\"name\">\r\n            <div class=\"form-group\">\r\n              <label for=\"username\">Nom</label>\r\n              <Field name=\"name\" type=\"text\" v-model=\"nom\" class=\"form-control\" />\r\n              <ErrorMessage name=\"name\" class=\"error-feedback\" />\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"username\">Prenom</label>\r\n              <Field name=\"prenom\" type=\"text\" v-model=\"prenom\" class=\"form-control\" />\r\n              <ErrorMessage name=\"prenom\" class=\"error-feedback\" />\r\n            </div>\r\n            </div>\r\n            <div class=\"name\">\r\n            <div class=\"form-group\">\r\n              <label for=\"email\">Email</label>\r\n              <Field name=\"email\" type=\"email\" v-model=\"email\" class=\"form-control\" />\r\n              <ErrorMessage name=\"email\" class=\"error-feedback\" />\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"password\">Password</label>\r\n              <Field name=\"password\" type=\"password\" class=\"form-control\" v-model=\"mdp\" />\r\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\r\n            </div>\r\n              </div>\r\n            <div class=\"politic\">\r\n\r\n            <label class=\"text-grey-600 cursor-pointer text-xs text-justify\">\r\n              <input type=\"checkbox\" name=\"terms\" required=\"required\" value=\"1\" tabindex=\"5\">\r\n              J'ai lu et accepté les Conditions Générales d'Utilisation <br>ainsi que la Politique de confidentialité.<br>\r\n            </label>\r\n            </div>\r\n\r\n            <div class=\"submit\">\r\n              <button type=\"submit\" class=\"btn  btn-block\">\r\n\r\n                Inscription\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"text\">\r\n        <div class=\"bloci\">\r\n          <p>\r\n            Vous n'avez pas de compte inscrivez-vous pour accéder à nos services\r\n          </p>\r\n          <div class=\"mybtn\">\r\n            <button onclick=\"window.location.href = '/login';\" class=\"btn btn-block\" :disabled=\"loading\">\r\n              <span v-show=\"loading\" class=\"spinner-border spinner-border-sm\"></span>\r\n\r\n              <span>Connexion</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"message\" class=\"alert\" :class=\"successful ? 'alert-success' : 'alert-danger'\">\r\n          {{ message }}\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Field, ErrorMessage } from \"vee-validate\";\r\nimport * as yup from \"yup\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"RegisterLogin\",\r\n  components: {\r\n    Field,\r\n    ErrorMessage,\r\n  },\r\n  data() {\r\n    const schema = yup.object().shape({\r\n      username: yup\r\n        .string()\r\n        .required(\"Un identifiant est nécessaire!\")\r\n        .min(3, \"Dois contenir plus de 3 caractéres !\")\r\n        .max(20, \"Dois contenir au maximum 20 caractéres !\"),\r\n      email: yup\r\n        .string()\r\n        .required(\"Un mail est nécessaire!\")\r\n        .email(\"Email invalid!\")\r\n        .max(50, \"Dois contenir au maximum 20 caractéres!\"),\r\n      password: yup\r\n        .string()\r\n        .required(\"Mot de passe nécessaire !\")\r\n        .min(8, \"Dois contenir au moins 8 caractéres !\")\r\n        .max(40, \"Dois contenir au maximum 20 caractéres!\"),\r\n    });\r\n\r\n    return {\r\n      successful: false,\r\n      loading: false,\r\n      message: \"\",\r\n      schema,\r\n      email: \"\",\r\n      name: \"\",\r\n      prenom: \"\",\r\n      password: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      try {\r\n        let response = await axios.post(\"http://localhost:3000/signup\", {\r\n          nom: this.nom,\r\n          prenom: this.prenom,\r\n          email: this.email,\r\n          mdp: this.mdp,\r\n        });\r\n        console.log(\"response login\", response);\r\n        const data = response.data;\r\n        console.log(data);\r\n        if (data[\"status\"] != 400 || data[\"success\"]) {\r\n          response = await axios.post(\"http://localhost:3000/login\", {\r\n            email: this.email,\r\n            mdp: this.mdp,\r\n          });\r\n          // Enregistrer le jeton d'authentification dans le stockage local ou dans un cookie\r\n          localStorage.setItem('authToken', response.data.token);\r\n          // Rediriger l'utilisateur vers la page suivante\r\n          this.$router.push('/profil');\r\n        } else {\r\n          // Afficher un message d'erreur à l'utilisateur\r\n          alert(data.message);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n.containnerform {\r\n  margin: auto;\r\n  width: 70%;\r\n  height: 50%;\r\n}\r\n.politic{\r\n  margin-top:30px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.bloc {\r\n  margin-top: 50px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  box-shadow: 10px 5px 5px gray;\r\n  height: 500px;\r\n}\r\n\r\n.form {\r\n  margin-right: 70px !important;\r\n  width: 500px;\r\n  margin-top: 20px;\r\n}\r\n.name{\r\n  display:flex;\r\n  justify-content: space-around;\r\n}\r\n\r\n.text {\r\n\r\n  width: 35%;\r\n  height: 100%;\r\n  background-color: forestgreen;\r\n}\r\n\r\n.bloci {\r\n  margin-top: 150px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n  padding: 20px;\r\n}\r\n\r\n.mybtn button {\r\n  width: 30vh;\r\n  margin: auto;\r\n  background-color: white;\r\n}\r\n\r\n.form img {\r\n  width: 100px;\r\n  height: 100px;\r\n  margin-left: 150px;\r\n}\r\n\r\n.text p {\r\n  color: white;\r\n}\r\n\r\n\r\n.titre {\r\n  margin-left: 50px;\r\n}\r\n\r\na {\r\n  color: white;\r\n}\r\n\r\na :hover {\r\n  color: forestgreen;\r\n}\r\n.btn{\r\n  top:20px;\r\n  width:200px;\r\n  margin:auto;\r\n  background-color: forestgreen;\r\n\r\n}\r\n\r\n.btnc {\r\n  background-color: forestgreen;\r\n  height: 40px;\r\n  color: white;\r\n}\r\n\r\n@media screen and (max-width: 756px) {\r\n  .containnerform {\r\n    height: 100vh;\r\n    width: 40vh;\r\n  }\r\n\r\n  .bloc {\r\n    width: 300px;\r\n    height: 800px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-left: 10px;\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .form {\r\n    margin-right: 100px !important;\r\n    width: 280px;\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .text {\r\n    width: 100%;\r\n    height: 30%;\r\n    background-color: forestgreen;\r\n  }\r\n\r\n}\r\n</style>\r\n\r\n\r\n"],"mappings":";AA0EA,SAASA,KAAK,EAAEC,YAAW,QAAS,cAAc;AAClD,OAAO,KAAKC,GAAE,MAAO,KAAK;AAC1B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACVL,KAAK;IACLC;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,MAAMC,MAAK,GAAIL,GAAG,CAACM,MAAM,EAAE,CAACC,KAAK,CAAC;MAChCC,QAAQ,EAAER,GAAE,CACTS,MAAM,EAAC,CACPC,QAAQ,CAAC,gCAAgC,EACzCC,GAAG,CAAC,CAAC,EAAE,sCAAsC,EAC7CC,GAAG,CAAC,EAAE,EAAE,0CAA0C,CAAC;MACtDC,KAAK,EAAEb,GAAE,CACNS,MAAM,EAAC,CACPC,QAAQ,CAAC,yBAAyB,EAClCG,KAAK,CAAC,gBAAgB,EACtBD,GAAG,CAAC,EAAE,EAAE,yCAAyC,CAAC;MACrDE,QAAQ,EAAEd,GAAE,CACTS,MAAM,EAAC,CACPC,QAAQ,CAAC,2BAA2B,EACpCC,GAAG,CAAC,CAAC,EAAE,uCAAuC,EAC9CC,GAAG,CAAC,EAAE,EAAE,yCAAyC;IACtD,CAAC,CAAC;IAEF,OAAO;MACLG,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE,EAAE;MACXZ,MAAM;MACNQ,KAAK,EAAE,EAAE;MACTX,IAAI,EAAE,EAAE;MACRgB,MAAM,EAAE,EAAE;MACVJ,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDK,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI;QACF,IAAIC,QAAO,GAAI,MAAMpB,KAAK,CAACqB,IAAI,CAAC,8BAA8B,EAAE;UAC9DC,GAAG,EAAE,IAAI,CAACA,GAAG;UACbL,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBL,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBW,GAAG,EAAE,IAAI,CAACA;QACZ,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,QAAQ,CAAC;QACvC,MAAMjB,IAAG,GAAIiB,QAAQ,CAACjB,IAAI;QAC1BqB,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC;QACjB,IAAIA,IAAI,CAAC,QAAQ,KAAK,GAAE,IAAKA,IAAI,CAAC,SAAS,CAAC,EAAE;UAC5CiB,QAAO,GAAI,MAAMpB,KAAK,CAACqB,IAAI,CAAC,6BAA6B,EAAE;YACzDT,KAAK,EAAE,IAAI,CAACA,KAAK;YACjBW,GAAG,EAAE,IAAI,CAACA;UACZ,CAAC,CAAC;UACF;UACAG,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEP,QAAQ,CAACjB,IAAI,CAACyB,KAAK,CAAC;UACtD;UACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,SAAS,CAAC;QAC9B,OAAO;UACL;UACAC,KAAK,CAAC5B,IAAI,CAACa,OAAO,CAAC;QACrB;MACF,EAAE,OAAOgB,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;MACtB;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}