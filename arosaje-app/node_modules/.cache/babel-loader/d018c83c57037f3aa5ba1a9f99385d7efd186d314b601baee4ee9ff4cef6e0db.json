{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\"\n};\nconst _hoisted_4 = {\n  class: \"list-group list-group-flush border-bottom scrollarea\"\n};\nconst _hoisted_5 = {\n  class: \"d-flex w-100 align-items-center justify-content-between\"\n};\nconst _hoisted_6 = {\n  class: \"mb-1\"\n};\nconst _hoisted_7 = {\n  class: \"col-10 mb-1 small\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"fs-5 fw-semibold\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username]])]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"list-group-item list-group-item-action py-3 lh-tight\",\n      key: message\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"strong\", _hoisted_6, _toDisplayString(message.username), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(message.message), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.submit && $setup.submit(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    placeholder: \"Write a message\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.message = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.message]])], 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$setup","username","$event","_hoisted_4","_Fragment","_renderList","messages","message","key","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","onSubmit","_cache","_withModifiers","args","submit","placeholder"],"sources":["C:\\Users\\toumy\\Desktop\\projet_mspr\\a-rosa-je_mspr_epsi\\arosaje-app\\src\\views\\messages.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\">\r\n      <div class=\"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\">\r\n        <input class=\"fs-5 fw-semibold\" v-model=\"username\"/>\r\n      </div>\r\n      <div class=\"list-group list-group-flush border-bottom scrollarea\">\r\n        <div class=\"list-group-item list-group-item-action py-3 lh-tight\"\r\n             v-for=\"message in messages\" :key=\"message\"\r\n        >\r\n          <div class=\"d-flex w-100 align-items-center justify-content-between\">\r\n            <strong class=\"mb-1\">{{ message.username }}</strong>\r\n          </div>\r\n          <div class=\"col-10 mb-1 small\">{{ message.message }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <form @submit.prevent=\"submit\">\r\n      <input class=\"form-control\" placeholder=\"Write a message\" v-model=\"message\"/>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ref, onMounted} from 'vue';\r\nimport Pusher from 'pusher-js';\r\n\r\nexport default {\r\n  name: 'ChatsPage',\r\n  setup() {\r\n    const username = ref('username');\r\n    const messages = ref([]);\r\n    const message = ref('');\r\n\r\n    onMounted(() => {\r\n      Pusher.logToConsole = true;\r\n\r\n      const pusher = new Pusher('25291c0752d6089a660c', {\r\n        cluster: 'eu'\r\n      });\r\n\r\n      const channel = pusher.subscribe('chat');\r\n      channel.bind('message', data => {\r\n        messages.value.push(data);\r\n      });\r\n    })\r\n\r\n    const submit = async () => {\r\n      await fetch('http://localhost:3000/api/messages', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({\r\n          username: username.value,\r\n          message: message.value\r\n        })\r\n      })\r\n\r\n      message.value = '';\r\n    }\r\n\r\n    return {\r\n      username,\r\n      messages,\r\n      message,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.scrollarea {\r\n  min-height: 500px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAA+D;;EACnEA,KAAK,EAAC;AAA0F;;EAGhGA,KAAK,EAAC;AAAsD;;EAIxDA,KAAK,EAAC;AAAyD;;EAC1DA,KAAK,EAAC;AAAM;;EAEjBA,KAAK,EAAC;AAAmB;;uBAZtCC,mBAAA,CAmBM,OAnBNC,UAmBM,GAlBJC,mBAAA,CAcM,OAdNC,UAcM,GAbJD,mBAAA,CAEM,OAFNE,UAEM,G,gBADJF,mBAAA,CAAoD;IAA7CH,KAAK,EAAC,kBAAkB;+DAAUM,MAAA,CAAAC,QAAQ,GAAAC,MAAA;iDAARF,MAAA,CAAAC,QAAQ,E,KAEnDJ,mBAAA,CASM,OATNM,UASM,I,kBARJR,mBAAA,CAOMS,SAAA,QAAAC,WAAA,CANiBL,MAAA,CAAAM,QAAQ,EAAnBC,OAAO;yBADnBZ,mBAAA,CAOM;MAPDD,KAAK,EAAC,sDAAsD;MAC/Bc,GAAG,EAAED;QAErCV,mBAAA,CAEM,OAFNY,UAEM,GADJZ,mBAAA,CAAoD,UAApDa,UAAoD,EAAAC,gBAAA,CAA5BJ,OAAO,CAACN,QAAQ,iB,GAE1CJ,mBAAA,CAA0D,OAA1De,UAA0D,EAAAD,gBAAA,CAAxBJ,OAAO,CAACA,OAAO,iB;sCAIvDV,mBAAA,CAEO;IAFAgB,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUhB,MAAA,CAAAiB,MAAA,IAAAjB,MAAA,CAAAiB,MAAA,IAAAD,IAAA,CAAM;sBAC3BnB,mBAAA,CAA6E;IAAtEH,KAAK,EAAC,cAAc;IAACwB,WAAW,EAAC,iBAAiB;+DAAUlB,MAAA,CAAAO,OAAO,GAAAL,MAAA;iDAAPF,MAAA,CAAAO,OAAO,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}