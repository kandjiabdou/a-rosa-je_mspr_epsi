{"ast":null,"code":"import liste from \"../data.json\";\nimport { mdiDelete } from \"@mdi/js\";\nimport axios from \"axios\";\nexport default {\n  name: \"liSte\",\n  data: () => ({\n    tab: 0,\n    items: liste[\"liste\"],\n    icon: mdiDelete,\n    gardiennageData: [],\n    idUser: 4\n  }),\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    deleteItem(index) {\n      this.items.splice(index, 1);\n    },\n    fetchData() {\n      console.log(\"test start\");\n      axios.get(\"http://localhost:3000/gardiennage/user/\" + this.idUser).then(response => {\n        this.gardiennageData = response.data.gardiennages;\n        console.log(\"ok get\");\n        console.log(response.data);\n        response.data.gardiennages.forEach(element => {\n          element[\"date_fin\"] = new Date(element[\"date_fin\"]).toLocaleDateString();\n          element[\"date_debut\"] = new Date(element[\"date_fin\"]).toLocaleDateString();\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      console.log(\"test fin\");\n    },\n    DeleteData(itemId) {\n      axios.delete(`http://localhost:3000/gardiennage/${this.idUser}/${itemId}`).then(response => {\n        console.log(\"Item deleted successfully\");\n        // Update the gardiennageData array with the updated data from the server\n        this.gardiennageData = response.data.gardiennages;\n        alert(\"Item deleted successfully!\");\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["liste","mdiDelete","axios","name","data","tab","items","icon","gardiennageData","idUser","mounted","fetchData","methods","deleteItem","index","splice","console","log","get","then","response","gardiennages","forEach","element","Date","toLocaleDateString","catch","error","DeleteData","itemId","delete","alert"],"sources":["C:\\Users\\toumy\\Desktop\\projet_mspr\\a-rosa-je_mspr_epsi\\arosaje-app\\src\\views\\GardiennageView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-card style=\"background-color: greenyellow\">\r\n      <!-- commented out code not needed -->\r\n\r\n      <v-toolbar style=\"background- color=\">\r\n        <v-toolbar-title>Mes Entretiens Effectu√©s</v-toolbar-title>\r\n      </v-toolbar>\r\n      <div class=\"d-flex flex-row\">\r\n        <v-tabs v-model=\"tab\" direction=\"vertical\" color=\"primary\">\r\n          <v-tab v-for=\"item in gardiennageData\" :key=\"item.i\" :value=\"item.i\">\r\n            <v-icon start color=\"green\"> mdi-account </v-icon>\r\n\r\n            <p color=\"white\">{{ item.description.substr(1, 10) }}</p>\r\n\r\n            <v-icon color=\"white\" @click=\"DeleteData(item.idAnnonce)\"></v-icon>\r\n          </v-tab>\r\n        </v-tabs>\r\n        <v-window v-model=\"tab\" bac>\r\n          <v-window-item\r\n            v-for=\"(item, index) in gardiennageData\"\r\n            :key=\"index\"\r\n            :value=\"index\"\r\n          >\r\n            <v-card flat>\r\n              <v-card-text style=\"background-color: white\">\r\n                <h1>A propos:</h1>\r\n                <br />\r\n                <p>{{ item.description }}</p>\r\n                <br />\r\n                <!-- <h3>Proprietaire : </h3><p>{{ item.nom_proprietaire }}</p><br/> -->\r\n                <h3>Debut Entretien</h3>\r\n                <br />\r\n                <p>{{ item.date_debut }}</p>\r\n                <br />\r\n                <h3>Fin Entretien</h3>\r\n                <br />\r\n                <p>{{ item.date_fin }}</p>\r\n\r\n                <v-row>\r\n                  <v-col\r\n                    v-for=\"(photo, i) in item.photo_gardiennage\"\r\n                    :key=\"i\"\r\n                    class=\"d-flex child-flex\"\r\n                    cols=\" item.photo_gardiennage.length\"\r\n                  >\r\n                    <v-img\r\n                      :src=\"'http://localhost:3000' + photo.lien\"\r\n                      :lazy-src=\"photo.lien\"\r\n                      aspect-ratio=\"1\"\r\n                      cover\r\n                      class=\"bg-grey-lighten-2\"\r\n                    >\r\n                      <template v-slot:placeholder>\r\n                        <v-row\r\n                          class=\"fill-height ma-0\"\r\n                          text-align=\"center\"\r\n                          justify=\"center\"\r\n                        >\r\n                          <v-progress-circular\r\n                            indeterminate\r\n                            color=\"grey-lighten-5\"\r\n                          ></v-progress-circular>\r\n                        </v-row>\r\n                      </template>\r\n                    </v-img>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-window-item>\r\n        </v-window>\r\n      </div>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport liste from \"../data.json\";\r\nimport { mdiDelete } from \"@mdi/js\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"liSte\",\r\n\r\n  data: () => ({\r\n    tab: 0,\r\n    items: liste[\"liste\"],\r\n    icon: mdiDelete,\r\n    gardiennageData: [],\r\n    idUser: 4,\r\n  }),\r\n  mounted() {\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    deleteItem(index) {\r\n      this.items.splice(index, 1);\r\n    },\r\n    fetchData() {\r\n      console.log(\"test start\");\r\n      axios\r\n        .get(\"http://localhost:3000/gardiennage/user/\" + this.idUser)\r\n        .then((response) => {\r\n          this.gardiennageData = response.data.gardiennages;\r\n          console.log(\"ok get\");\r\n          console.log(response.data);\r\n          response.data.gardiennages.forEach((element) => {\r\n            element[\"date_fin\"] = new Date(\r\n              element[\"date_fin\"]\r\n            ).toLocaleDateString();\r\n            element[\"date_debut\"] = new Date(\r\n              element[\"date_fin\"]\r\n            ).toLocaleDateString();\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n      console.log(\"test fin\");\r\n    },\r\n    DeleteData(itemId) {\r\n      axios\r\n        .delete(`http://localhost:3000/gardiennage/${this.idUser}/${itemId}`)\r\n        .then((response) => {\r\n          console.log(\"Item deleted successfully\");\r\n          // Update the gardiennageData array with the updated data from the server\r\n          this.gardiennageData = response.data.gardiennages;\r\n          alert(\"Item deleted successfully!\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":"AA8EA,OAAOA,KAAI,MAAO,cAAc;AAChC,SAASC,SAAQ,QAAS,SAAS;AACnC,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,OAAO;EAEbC,IAAI,EAAEA,CAAA,MAAO;IACXC,GAAG,EAAE,CAAC;IACNC,KAAK,EAAEN,KAAK,CAAC,OAAO,CAAC;IACrBO,IAAI,EAAEN,SAAS;IACfO,eAAe,EAAE,EAAE;IACnBC,MAAM,EAAE;EACV,CAAC,CAAC;EACFC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,SAAS,EAAE;EAClB,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,KAAK,EAAE;MAChB,IAAI,CAACR,KAAK,CAACS,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IAC7B,CAAC;IACDH,SAASA,CAAA,EAAG;MACVK,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzBf,KAAI,CACDgB,GAAG,CAAC,yCAAwC,GAAI,IAAI,CAACT,MAAM,EAC3DU,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACZ,eAAc,GAAIY,QAAQ,CAAChB,IAAI,CAACiB,YAAY;QACjDL,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;QACrBD,OAAO,CAACC,GAAG,CAACG,QAAQ,CAAChB,IAAI,CAAC;QAC1BgB,QAAQ,CAAChB,IAAI,CAACiB,YAAY,CAACC,OAAO,CAAEC,OAAO,IAAK;UAC9CA,OAAO,CAAC,UAAU,IAAI,IAAIC,IAAI,CAC5BD,OAAO,CAAC,UAAU,EACnB,CAACE,kBAAkB,EAAE;UACtBF,OAAO,CAAC,YAAY,IAAI,IAAIC,IAAI,CAC9BD,OAAO,CAAC,UAAU,EACnB,CAACE,kBAAkB,EAAE;QACxB,CAAC,CAAC;MACJ,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBX,OAAO,CAACC,GAAG,CAACU,KAAK,CAAC;MACpB,CAAC,CAAC;MACJX,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACzB,CAAC;IACDW,UAAUA,CAACC,MAAM,EAAE;MACjB3B,KAAI,CACD4B,MAAM,CAAE,qCAAoC,IAAI,CAACrB,MAAO,IAAGoB,MAAO,EAAC,EACnEV,IAAI,CAAEC,QAAQ,IAAK;QAClBJ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;QACxC;QACA,IAAI,CAACT,eAAc,GAAIY,QAAQ,CAAChB,IAAI,CAACiB,YAAY;QACjDU,KAAK,CAAC,4BAA4B,CAAC;MACrC,CAAC,EACAL,KAAK,CAAEC,KAAK,IAAK;QAChBX,OAAO,CAACC,GAAG,CAACU,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}